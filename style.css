:root{
  color-scheme: dark;
  --bg:#0b1220;
  --fg:#e7e7ef;
  --panel:#0f1a33;
  --accent:#3b82f6;
  --good:#22c55e;
  --bad:#ef4444;
  --grid:#0e172b;
  --grid-dark:#0c1425;
  --cell: 34px;            /* lato cella (desktop) */
  --gap: 4px;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}

/* Appbar */
.appbar{position:sticky;top:0;z-index:20;background:var(--bg);border-bottom:1px solid #142346;padding:.75rem 1rem}
.appbar h1{margin:0;font-size:clamp(18px,2.2vw,28px)}

/* Controls */
.controls.panel{
  position:sticky;top:56px;z-index:15;background:var(--bg);
  display:flex;flex-wrap:wrap;align-items:center;gap:.5rem .6rem;
  padding:.6rem 1rem;border-bottom:1px solid #142346;
}
.controls .status{margin-left:.5rem;opacity:.9}

button, select{font-size:16px;line-height:1.15}
button{font-weight:700;letter-spacing:.2px;padding:10px 14px;border-radius:10px;border:1px solid #223055;background:#101b36;color:var(--fg)}
button.ghost{background:#fff;color:#0f172a;border:1px solid var(--accent)}
button.ghost:hover{background:#f1f5f9;border-color:#2563eb}
select{padding:.45rem .6rem;border-radius:10px;border:1px solid #223055;background:#101b36;color:var(--fg)}

/* Playfield layout */
.playfield{padding:1rem;display:grid;gap:.6rem}
.col-clues{
  display:grid;grid-auto-rows:minmax(0,auto);grid-template-columns: repeat(var(--w,10), var(--cell));
  justify-content:flex-start;gap:var(--gap);
  padding-left:calc(var(--cell) * 5 + var(--gap) * 5); /* spazio per le row clues (max 5 numeri) */
}
.grid-wrap{display:grid;grid-template-columns:auto 1fr;gap:.6rem;align-items:start}

/* Clues */
.row-clues{display:grid;grid-template-rows:repeat(var(--h,10), var(--cell));gap:var(--gap)}
.clue{
  min-width:calc(var(--cell) * 5 + var(--gap) * 4);
  display:flex;gap:6px;align-items:center;justify-content:flex-end;
  opacity:.95
}
.clue.empty{opacity:.5}
.col-clues .clue{flex-direction:column;gap:2px;justify-content:flex-end;align-items:center}

/* Board */
.board{
  --w:10; --h:10;
  display:grid;
  grid-template-columns:repeat(var(--w), var(--cell));
  grid-auto-rows:var(--cell);
  gap:var(--gap);
  background:var(--panel);
  padding:6px;border-radius:12px;border:1px solid #1a2a4d;
  user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;touch-action:none;
}
.cell{background:var(--grid);border-radius:6px;box-shadow:inset 0 0 0 1px #172341}
.cell.dark{background:var(--grid-dark)}
.cell.fill{background:linear-gradient(180deg,#1fb36c,#159556)}
.cell.cross{position:relative}
.cell.cross::before,.cell.cross::after{
  content:"";position:absolute;left:6px;right:6px;top:50%;height:2px;background:#cbd5e1;opacity:.8;transform:rotate(45deg)
}
.cell.cross::after{transform:rotate(-45deg)}

/* JSON dialog */
dialog{border:none;border-radius:14px;background:#0f1a33;color:var(--fg);padding:0;max-width:min(760px,92vw)}
.json-form{padding:1rem;display:grid;gap:.6rem}
.json-form .hint{opacity:.85;margin:.25rem 0}
textarea{width:100%;min-height:240px;border-radius:12px;border:1px solid #223055;background:#0b1326;color:var(--fg);padding:.6rem;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,"Courier New",monospace}
.actions{display:flex;gap:.5rem;justify-content:flex-end}

/* Responsive */
@media (max-width:900px){
  :root{ --cell: 30px }
  .controls.panel{top:52px}
}
@media (max-width:600px){
  :root{ --cell: 26px; --gap: 3px }
  .col-clues{padding-left:calc(var(--cell) * 4 + var(--gap) * 4)} /* meno spazio per numeri corti */
}
